
<div class="modal fade" style="background: rgba(41, 42, 45, 0.164); backdrop-filter: blur(5px);" id="reviwContentModal{{ topic.id }}" tabindex="-1" aria-labelledby="deleteUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl rounded" style="width: 75vw; height: ; max-width: none;">
      <div class="modal-content text-white  border-0" style=" width: 800px;background: rgba(24, 29, 40, 0.55);  
                backdrop-filter: blur(5px);  
                height: 100%;
                width: 100%;
                border: 1px solid #3a3a46;">
        <div class="modal-header">
          <h4 class="modal-title " id="reviewContentrModalLabel{{ topic.id }}"><small>Summary</small></h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body row" style="margin: 3%;" >             
            <div class="col-lg-4 border-end " id="cnt">
                <p>Card details</p>
                <div>
                    <div><small>created_at: {{topic.created_at}}</small></div>
                    <div><small>reviewed_at:</small></div>
                    <div><small>next_review:</small></div>
                </div>
                <br>
                <div class="" id="cnt">                
                    <h5>progress</h5>
                    <div class="progress" style="height: 8px;">
                        <div class="progress-bar bg-success" style="width: 20%; "></div>
                    </div>
                    <div><small class="">20% mastered</small></div>                                
                </div>                                          
            </div>  
                              
            <div class="col-lg-7 ms-auto text-center overflow-y-auto " id="cnt" style="background: ; backdrop-filter: blur(5px);">
                <h5>card</h5>
                <div>
                     <small> 
                         {% for card in topic.cards %}
                             <div>
                                 <h4><small>{{loop.index}}</small></h4>
                                 <p class="text-white">Quiz: {{card.question}}</p>
                                 <p>answer: {{card.answer}}</p> 
                             </div>                                     
                         {% else %}
                             <div class="text-center text-muted py-3">
                                 No cards
                             </div>
                         {% endfor %}
                     </small>
                </div>
            </div>
        </div>

        <div class="modal-footer ">
            <div type="submit" class="btn" title="edit" style=" width: fit-content">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-pencil" viewBox="0 0 16 16">
                    <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                </svg>
            </div>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><small>Close</small></button>
          
          <form method="post" action="{{url_for('study.review_topic')}}">

          </form>

        </div>
      </div>
    </div>
</div>


<div class="modal fade" style="background: rgba(41, 42, 45, 0.364)" id="delTopicModal{{ topic.id }}" tabindex="-1" aria-labelledby="deleteUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content text-white" style="background: rgba(24, 29, 40, 0.65); backdrop-filter: blur(5px); ">
            <div class="modal-header">
                <h5 class="modal-title " id="delTopicModalLabel{{ topic.id }}">Confirm</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">          
                Remove '{{topic.title}}' topic ?                   
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                
                <form method="post" action="{{url_for('study.review_topic')}}">
                    <input id="topic_delete" name="topic_delete" type="hidden" value="{{topic.id}}">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>

            </div>
        </div>
    </div>
</div>

<!-- AI modal -->
 <div class="modal fade"  style="background: rgba(41, 42, 45, 0.364); " id="chatAIModal{{ topic.id }}" tabindex="-1" aria-labelledby="chatAIModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" >
       <div class="modal-content text-white" style="background: rgba(24, 29, 40, 0.65); backdrop-filter: blur(5px);">
        <div class="modal-header border-0 " >
            <h5>
                Review summary for {{topic.title}}
            </h5>
        </div>
        <div class="modal-body h-75 text-center rounded" id="aimdl">
            <div id="aiSummaryLoading" class="text-center py-4">
                <div class="spinner-border text-light" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Generating AI summary...</p>
            </div>
            <div id="aiSummaryContent" class="d-none"></div>
            <div id="aiSummaryError" class="d-none alert alert-danger"></div>
        </div>
        <div class="modal-footer border-0">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
       </div>
       
    </div>
 </div>